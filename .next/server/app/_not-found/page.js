(()=>{var e={};e.id=492,e.ids=[492],e.modules={134:(e,t,r)=>{"use strict";r.d(t,{Ri:()=>s,TV:()=>o,Yj:()=>n});let o=(e,t,r=3600)=>{};function s(e){return null}function n(e){document.cookie=e+"=; path=/; Max-Age=-99999999;"}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1622:(e,t,r)=>{Promise.resolve().then(r.bind(r,6475))},2302:(e,t,r)=>{Promise.resolve().then(r.bind(r,2873))},2461:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},2873:(e,t,r)=>{"use strict";r.d(t,{GlobalContextProvider:()=>c,S:()=>d});var o=r(687),s=r(3210),n=r(134),i=r(9434),a=r(6189);let l=(0,s.createContext)(),c=({children:e})=>{(0,a.useRouter)();let[t,r]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),[u,p]=(0,s.useState)([]),[h,m]=(0,s.useState)(()=>{let e=(0,n.Ri)("access_token");return null!==e&&!(e.length<=0)}),f=async()=>{try{let e=await i.uE.fetchMyCart();if(e.error)return void alert(e.message);console.log("My Cart",e),r(e.items)}catch(e){console.log("Error fetching cart",e)}},v=async()=>{try{let e=await i.uE.fetchMyProfile();if(e.error)return void alert(e.message);d(e),console.log("User Profile",e)}catch(e){console.log("Error fetching profile",e)}},b=async()=>{try{let{access_token:e,access_token_expires_at:t}=await i.uE.refreshAccessToken(),r=Date.parse(t),o=Date.now();(0,n.TV)("access_token",e,parseInt(`${(r-o)/1e3}`)),m(!0)}catch(e){cosole.log("Error renewing token",e)}},g=async()=>{try{let e=await i.uE.fetchCategories();if(e.error)return void alert(e.message);p(e)}catch(e){console.log(e),alert("Something went wrong")}};return(0,s.useEffect)(()=>{let e=setInterval(()=>{let e=(0,n.Ri)("access_token"),t=(0,n.Ri)("refresh_token");if(!e&&null===e)if(t&&null!==t)return void b();else h&&window.location.reload()},1e3);return h&&v(),()=>clearInterval(e)},[h]),(0,s.useEffect)(()=>{f(),g()},[]),(0,o.jsx)(l.Provider,{value:{isLogin:h,setIsLogin:m,categories:u,setCategories:p,userProfile:c,setUserProfile:d,cart:t,setCart:r},children:(0,o.jsx)("div",{children:e})})},d=()=>(0,s.useContext)(l)},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var o=r(7413),s=r(2376),n=r.n(s),i=r(8726),a=r.n(i);r(1135);var l=r(6475);let c={title:"Amazing Cart",description:"e-commerce store for cloths"};function d({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:`${n().variable} ${a().variable} antialiased`,children:(0,o.jsx)(l.GlobalContextProvider,{children:(0,o.jsx)("main",{children:e})})})})}},6254:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var o=r(5239),s=r(8088),n=r(8170),i=r.n(n),a=r(893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c={children:["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"D:\\react-project\\next-js_project\\raksha_shop\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=[],u={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6429:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},6475:(e,t,r)=>{"use strict";r.d(t,{GlobalContextProvider:()=>s});var o=r(2907);let s=(0,o.registerClientReference)(function(){throw Error("Attempted to call GlobalContextProvider() from the server but GlobalContextProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\react-project\\next-js_project\\raksha_shop\\src\\context\\GlobalContext.js","GlobalContextProvider");(0,o.registerClientReference)(function(){throw Error("Attempted to call useGlobalContext() from the server but useGlobalContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\react-project\\next-js_project\\raksha_shop\\src\\context\\GlobalContext.js","useGlobalContext")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9434:(e,t,r)=>{"use strict";r.d(t,{uE:()=>s});var o=r(134);let s=async(e,t,r=null,s="")=>{let n,i=(0,o.Ri)("access_token"),a={"Content-Type":"application/json"};s?a.Authorization=`Bearer ${(0,o.Ri)(s)}`:a.Authorization=`Bearer ${i}`,n=r&&null!==r?{method:t,headers:{...a},body:JSON.stringify(r)}:{method:t,headers:{...a}};let l=await fetch(`https://api.store.inflection.org.in${e}`,n);return await l.json()};s.login=e=>s("/users/login","POST",e),s.signup=e=>s("/users/signup","POST",e),s.resetPassword=(e,t)=>s(`/users/reset_password/${e}`,"PATCH",t),s.forgotPassword=e=>s("/users/forgot_password","POST",e),s.refreshAccessToken=()=>s("/users/renew_token","GET",null,"refresh_token"),s.fetchMyProfile=()=>s("/users/profiles/my","GET"),s.getProducts=(e="limit=20&page=1")=>s(`/products/public?${e}`,"GET"),s.getProductBySlug=e=>s(`/products/public/s/${e}`,"GET"),s.fetchCategories=()=>s("/categories/list","GET"),s.getCategoryBySlug=e=>s(`/categories/s/${e}`,"GET"),s.getCategoryProductsBySlug=e=>s(`/products/public/cat/${e}`,"GET"),s.getAttributesByCategory=e=>s(`/attributes/${e}`,"GET"),s.fetchMyCart=()=>s("/carts/my","GET"),s.addToCart=e=>s("/carts","POST",e)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[45],()=>r(6254));module.exports=o})();